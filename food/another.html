<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recipe Finder</title>
<style>:root{
  --bg-dark:#121212;
  --card-bg:rgba(30,30,30,0.6); /* dark glass */
  --text-light:#f5f5f5;
  --primary:#4caf50;
  --primary-dark:#388e3c;
  --accent:#ff9800;
  --accent-dark:#e68900;
  --shadow:0 8px 32px rgba(0,0,0,0.6);
  --blur:blur(12px);
}

*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:"Poppins",sans-serif;
  background:var(--bg-dark);
  color:var(--text-light);
  line-height:1.6;
}

/* Header */
header{
  position:sticky;
  top:0;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:var(--card-bg);
  backdrop-filter:var(--blur);
  padding:1rem 2rem;
  box-shadow:var(--shadow);
  z-index:1000;
}
header .logo{
  font-size:1.6rem;
  font-weight:700;
  color:var(--primary);
}
nav button{
  margin:0 .5rem;
  padding:.6rem 1.2rem;
  border:none;
  background:none;
  font-size:1rem;
  cursor:pointer;
  border-radius:6px;
  color:var(--text-light);
  transition:.2s;
}
nav button:hover, nav button.active{
  color:#fff;
  background:var(--primary);
  font-weight:600;
}

/* Hero Section */
.hero{
  background:linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)), url("https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1600&q=80") center/cover no-repeat;
  padding:7rem 2rem;
  text-align:center;
  color:#fff;
  position:relative;
}
.hero-content{position:relative;z-index:1;max-width:700px;margin:auto;}
.hero h1{font-size:3.2rem;margin-bottom:1rem;line-height:1.2;}

/* Search Box */
.search-box{
  display:flex;
  justify-content:center;
  margin:30px auto;
  max-width:650px;
  border-radius:15px;
  background:var(--card-bg);
  backdrop-filter:var(--blur);
  box-shadow:var(--shadow);
  overflow:hidden;
}
#search-input{
  padding:15px 20px;
  font-size:1rem;
  flex-grow:1;
  border:none;
  outline:none;
  background:transparent;
  color:var(--text-light);
}
#search-input:focus{background:rgba(255,255,255,0.05);}
#search-button{
  padding:14px 28px;
  font-size:1rem;
  font-weight:600;
  background:var(--primary);
  color:#fff;
  border:none;
  cursor:pointer;
  transition:background .2s;
}
#search-button:hover{background:var(--primary-dark);}

.random-button{
  margin-top:12px;
  padding:12px 28px;
  font-size:1rem;
  font-weight:600;
  background:var(--accent);
  color:#fff;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:.2s;
}
.random-button:hover{background:var(--accent-dark);}

/* Cards / Recipes */
.results-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:25px;
  margin:40px auto;
  max-width:1200px;
  padding:0 20px;
}
.recipe-item,.card{
  flex:0 0 260px; /* fixed width for slider */
  min-width:260px;
  max-width:260px;
  background:var(--card-bg);
  border-radius:15px;
  box-shadow:var(--shadow);
  cursor:pointer;
  transition:transform .25s,box-shadow .25s;
  overflow:hidden;
  backdrop-filter:var(--blur);
}
.recipe-item:hover,.card:hover{
  transform:translateY(-6px);
  box-shadow:0 12px 30px rgba(0,0,0,0.6);
}
.recipe-item img,.card img{
  width:100%;
  height:200px;
  object-fit:cover;
  border-bottom:1px solid rgba(255,255,255,0.2);
}
.recipe-item h3,.card-body h4{
  text-align:center;
  padding:12px;
  font-size:1.15rem;
}
.card-body{padding:.8rem;}
.card-footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:.5rem;
}
.heart{cursor:pointer;font-size:1.2rem;}
.heart.fav{color:var(--accent);}

/* Modal */
.modal-container{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2000;
  opacity:0;
  visibility:hidden;
  transition:opacity .25s ease,visibility .25s ease;
}
.modal-container.show{opacity:1;visibility:visible;}
.modal-content{
  background:var(--card-bg);
  color:var(--text-light);
  max-width:850px;
  max-height:90vh;
  overflow-y:auto;
  padding:35px;
  border-radius:20px;
  position:relative;
  box-shadow:var(--shadow);
  backdrop-filter:var(--blur);
}
.modal-close-btn{
  position:absolute;
  top:15px;
  right:15px;
  background:rgba(0,0,0,0.3);
  border:none;
  border-radius:50%;
  width:38px;
  height:38px;
  font-size:1.4rem;
  color:var(--text-light);
  cursor:pointer;
  transition:background .2s;
}
.modal-close-btn:hover{background:rgba(0,0,0,0.5);}

/* Categories */
.categories{padding:2rem;max-width:1200px;margin:auto;}
.category{margin-bottom:2rem;}
.category h3{margin-bottom:1rem;color:var(--accent);}
.slider{
  display:flex;
  overflow-x:auto;
  gap:1rem;
  padding-bottom:1rem;
  scroll-snap-type:x mandatory;
}
.slider::-webkit-scrollbar{
  height:8px;
}
.slider::-webkit-scrollbar-thumb{
  background:var(--primary);
  border-radius:4px;
}

/* Favorites Section */
#favorites{padding:2rem;max-width:1200px;margin:auto;}
</style>
<body>
<header>
  <div class="logo">RecipeFinder</div>
  <nav>
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('favorites')">Favorites</button>
  </nav>
</header>

<section class="hero" id="home">
<div class="hero-content">
<h1>Find recipes that spark joy üç≤</h1>
<form id="search-form" class="search-box">
<input type="text" id="search-input" placeholder="Search by name (eg. 'carrot')" />
<button type="submit" id="search-button">Search</button>
</form>
<button id="random-button" class="random-button">Get Random Recipe</button>
<div class="message" id="message-area">Search for a recipe or get a random one!</div>
</div>
</section>

<section class="results-grid" id="results-grid"></section>

<div class="modal-container" id="recipe-modal">
<div class="modal-content">
<button id="modal-close-btn" class="modal-close-btn">&times;</button>
<div id="recipe-details-content"></div>
</div>
</div>

<section class="categories" id="categories">
<h2 style="text-align:center; margin:2rem 0;">Recipe Categories</h2>
<div class="category"><h3>üç≥ Breakfast</h3><div class="slider" id="breakfast"></div></div>
<div class="category"><h3>ü•ó Lunch</h3><div class="slider" id="lunch"></div></div>
<div class="category"><h3>üçõ Dinner</h3><div class="slider" id="dinner"></div></div>
<div class="category"><h3>üçî Snacks</h3><div class="slider" id="snacks"></div></div>
<div class="category"><h3>üç∞ Desserts</h3><div class="slider" id="desserts"></div></div>
</section>

<section id="favorites">
<h2 style="text-align:center; margin:2rem 0;">‚≠ê Your Favorites</h2>
<div class="slider" id="favList"></div>
</section>

<script>
const SEARCH_API="https://www.themealdb.com/api/json/v1/1/search.php?s=";
const RANDOM_API="https://www.themealdb.com/api/json/v1/1/random.php";
// const CATEGORIES_API="https://www.themealdb.com/api/json/v1/1/filter.php?c=";
const LOOKUP_API="https://www.themealdb.com/api/json/v1/1/lookup.php?i=";

const searchForm=document.getElementById("search-form");
const searchInput=document.getElementById("search-input");
const resultsGrid=document.getElementById("results-grid");
const messageArea=document.getElementById("message-area");
const randomButton=document.getElementById("random-button");
const modal=document.getElementById("recipe-modal");
const modalContent=document.getElementById("recipe-details-content");
const modalCloseBtn=document.getElementById("modal-close-btn");
const favList=document.getElementById("favList");

let favorites=JSON.parse(localStorage.getItem("favorites"))||[];

function showMessage(msg,type=""){messageArea.textContent=msg;messageArea.className="message "+type;}
function clearMessage(){messageArea.textContent="";messageArea.className="message";}

searchForm.addEventListener("submit",async e=>{e.preventDefault();const term=searchInput.value.trim();if(!term)return showMessage("Please enter a search term","error");showMessage(`Searching for "${term}"...`,"loading");resultsGrid.innerHTML="";try{const res=await fetch(SEARCH_API+term);const data=await res.json();clearMessage();if(data.meals)displayRecipes(data.meals);else showMessage(`No recipes found for "${term}"`,"error");}catch{showMessage("Error fetching recipes","error");}});

function displayRecipes(recipes){
recipes.forEach(r=>{
const div=document.createElement("div");
div.className="recipe-item";
div.dataset.id=r.idMeal;
div.innerHTML=`<img src="${r.strMealThumb}" alt="${r.strMeal}"><h3>${r.strMeal}</h3>`;
resultsGrid.appendChild(div);
});
}

randomButton.addEventListener("click",async ()=>{
showMessage("Fetching a random recipe...","loading");
resultsGrid.innerHTML="";
try{const res=await fetch(RANDOM_API);const data=await res.json();clearMessage();if(data.meals)displayRecipes(data.meals);}catch{showMessage("Error fetching random recipe","error");}});

resultsGrid.addEventListener("click",e=>{
const card=e.target.closest(".recipe-item");
if(card)getRecipeDetails(card.dataset.id);
});

async function getRecipeDetails(id){
modalContent.innerHTML="<p class='message loading'>Loading...</p>";
modal.classList.add("show");
try{const res=await fetch(LOOKUP_API+id);const data=await res.json();if(data.meals)showRecipeDetails(data.meals[0]);}catch{modalContent.innerHTML="<p class='message error'>Failed to load details.</p>";}}

function showRecipeDetails(recipe){
let ingredients=[];
for(let i=1;i<=20;i++){const ing=recipe[`strIngredient${i}`];const measure=recipe[`strMeasure${i}`];if(ing)ingredients.push(`<li>${measure} ${ing}</li>`);}
modalContent.innerHTML=`<h2>${recipe.strMeal}</h2><img src="${recipe.strMealThumb}" alt="${recipe.strMeal}"><h3>Ingredients</h3><ul>${ingredients.join("")}</ul><h3>Instructions</h3><p>${recipe.strInstructions.replace(/\r?\n/g,"<br>")}</p>`;}

modalCloseBtn.addEventListener("click",()=>modal.classList.remove("show"));
modal.addEventListener("click",e=>{if(e.target===modal)modal.classList.remove("show");});

function showPage(page){document.getElementById(page).scrollIntoView({behavior:"smooth"});}

// Fetch category recipes from API
async function fetchCategory(catId,catName){
const res=await fetch(CATEGORIES_API+catName);const data=await res.json();
if(data.meals)renderCategory(catId,data.meals.slice(0,20).map(m=>({id:m.idMeal,title:m.strMeal,img:m.strMealThumb})));
}

function renderCategory(catId,data){
const container=document.getElementById(catId);container.innerHTML="";
data.forEach(r=>{
const isFav=favorites.some(f=>f.id===r.id);
const div=document.createElement("div");
div.className="card";
div.innerHTML=`<img src="${r.img}" alt="${r.title}"><div class="card-body"><h4>${r.title}</h4><div class="card-footer"><span>‚è± 20m</span><span class="heart ${isFav?"fav":""}" onclick='toggleFav("${r.id}",this,${JSON.stringify(r)})'>‚ù§</span></div></div>`;
container.appendChild(div);
});
}

function toggleFav(id,el,recipe){
const index=favorites.findIndex(r=>r.id===id);
if(index>-1){favorites.splice(index,1);el.classList.remove("fav");}else{favorites.push(recipe);el.classList.add("fav");}
localStorage.setItem("favorites",JSON.stringify(favorites));
renderFavorites();
}

function renderFavorites(){if(!favList)return;favList.innerHTML="";favorites.forEach(r=>{const div=document.createElement("div");div.className="card";div.innerHTML=`<img src="${r.img}" alt="${r.title}"><div class="card-body"><h4>${r.title}</h4><div class="card-footer"><span>‚è± 20m</span><span class="heart fav" onclick='toggleFav("${r.id}",this,${JSON.stringify(r)})'>‚ù§</span></div></div>`;favList.appendChild(div);});}

// Init categories + favorites
fetchCategory("breakfast","Breakfast");
fetchCategory("lunch","Lunch");
fetchCategory("dinner","Dinner");
fetchCategory("snacks","Side");
fetchCategory("desserts","Dessert");
renderFavorites();
</script>
</body>
</html>
